<div class="show-chat-content" data-controller="chatroom-subscription" data-chatroom-subscription-chatroom-id-value="<%= @chatroom.id %>">

  <h1><%= @chatroom.name %></h1>

  <div class="chat-avatar">
    <div>
      <% if current_user.photo.key %>
          <%=cl_image_tag current_user.photo.key, crop: :crop%>
        <% else %>
          <img src="https://png.pngtree.com/png-vector/20190114/ourlarge/pngtree-vector-avatar-icon-png-image_313572.jpg">
        <% end %>
    </div>

    <div id="double-arrow">
      <%= image_tag("arrow-double.png") %>
    </div>

    <div>
      <% @other_user = @chatroom.participants.find{|participant| participant.user != current_user} %>
      <% if @other_user.user.photo.key %>
        <%=cl_image_tag @other_user.user.photo.key%>
      <% else %>
        <img src="https://png.pngtree.com/png-vector/20190114/ourlarge/pngtree-vector-avatar-icon-png-image_313572.jpg">
      <% end %>
    </div>
  </div>


  <div class="messages" data-chatroom-subscription-target="messages">
    <% @chatroom.messages.each do |message| %>

    <%= render "messages/message", message: message%>

    <% end %>
  </div>


  <%= simple_form_for [@chatroom, @message],
    html: { data: { action: "turbo:submit-end->chatroom-subscription#resetForm" }, class: "chat-input" } do |f|
  %>
  <div>
    <%= f.input :content,
      label: false,
      placeholder: "Aa",
      wrapper_html: {class: "flex-grow-1"}
    %>
  </div>

  <div>
    <%= f.submit "Send", class: "button-custom-chatroom" %>
  </div>
  <% end %>

</div>
